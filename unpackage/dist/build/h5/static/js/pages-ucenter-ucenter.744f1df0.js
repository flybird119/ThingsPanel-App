(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-ucenter-ucenter"],{"0bc8":function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"tp-box tp-box-sizing tp-flex tp-flex-col tp-pd-l-r-30"},[i("v-uni-view",[i("v-uni-view",{staticClass:"tp-panel tp-uinfo tp-flex tp-flex-col tp-flex-j-c tp-flex-a-c tp-mg-t-50"},[t.$login.isLoginType().isLogin?i("v-uni-image",{staticClass:"tp-mg-t-20",attrs:{src:t.uhead}}):i("v-uni-image",{staticClass:"tp-mg-t-20",attrs:{src:t.uhead},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.isLogin=!0}}}),i("v-uni-view",{staticClass:"tp-flex tp-flex-row tp-felx-j-l tp-flex-a-c tp-mg-t-b-15"},[t.$login.isLoginType().isLogin?t._e():i("v-uni-text",{staticClass:"tp-mg-r-10"},[t._v("未登录/注册")])],1),t.$login.isLoginType().isLogin?t._e():i("v-uni-view",{staticClass:"tp-box-sizing tp-mg-t-b-10"},[t._v("点击头像可登录/注册")])],1),i("v-uni-view",{staticClass:"tp-panel tp-flex tp-flex-col tp-mg-t-50"},[i("v-uni-view",{staticClass:"tp-panel-item tp-flex tp-flex-row tp-flex-j-s tp-flex-a-c tp-box-sizing tp-pd-t-b-20 tp-pd-l-r-10",attrs:{"hover-class":"tp-panel-item-hover"}},[i("v-uni-view",{staticClass:"tp-flex-1 tp-flex tp-flex-row tp-flex-j-s tp-flex-a-c tp-mg-l-15"},[i("v-uni-view",[t._v("名字")]),i("v-uni-view",{staticStyle:{display:"flex"}},[t.userWxInfo.name?i("v-uni-view",{},[t._v(t._s(t.userWxInfo.name))]):t._e(),i("v-uni-view",{staticClass:"iconfont iconjiantou1"})],1)],1)],1),i("v-uni-view",{staticClass:"tp-panel-item tp-flex tp-flex-row tp-flex-j-s tp-flex-a-c tp-box-sizing tp-pd-t-b-20 tp-pd-l-r-10",attrs:{"hover-class":"tp-panel-item-hover"}},[i("v-uni-view",{staticClass:"tp-flex-1 tp-flex tp-flex-row tp-flex-j-s tp-flex-a-c tp-mg-l-15"},[i("v-uni-view",[t._v("电话")]),i("v-uni-view",{staticStyle:{display:"flex"}},[t.userWxInfo.mobile?i("v-uni-view",{},[t._v(t._s(t.userWxInfo.mobile))]):t._e(),i("v-uni-view",{staticClass:"iconfont iconjiantou1"})],1)],1)],1),i("v-uni-view",{staticClass:"tp-panel-item tp-flex tp-flex-row tp-flex-j-s tp-flex-a-c tp-box-sizing tp-pd-t-b-20 tp-pd-l-r-10",attrs:{"hover-class":"tp-panel-item-hover"}},[i("v-uni-view",{staticClass:"tp-flex-1 tp-flex tp-flex-row tp-flex-j-s tp-flex-a-c tp-mg-l-15"},[i("v-uni-view",[t._v("邮箱")]),i("v-uni-view",{staticStyle:{display:"flex"}},[t.userWxInfo.email?i("v-uni-view",{},[t._v(t._s(t.userWxInfo.email))]):t._e(),i("v-uni-view",{staticClass:"iconfont iconjiantou1"})],1)],1)],1)],1),t.$login.isLoginType().isLogin?i("v-uni-view",{staticClass:"quitLogin",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toQuitLogin.apply(void 0,arguments)}}},[t._v("退出登录")]):t._e()],1)],1),i("cys-toast",{ref:"toast",attrs:{msg:t.toast.msg,location:"top"}})],1)},a=[]},1037:function(t,e,i){var n=i("80e8");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("7823de45",n,!0,{sourceMap:!1,shadowMode:!1})},"80e8":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".quitLogin[data-v-54edf760]{width:%?690?%;height:%?86?%;line-height:%?86?%;background:#207af5;border-radius:%?10?%;margin:0 auto;margin-top:%?56?%;font-size:%?32?%;font-family:Source Han Sans CN;font-weight:500;color:#fff;text-align:center}.tp-box[data-v-54edf760]{width:100%;min-height:100vh\r\n\t\t/* background: #FFFFFF; */}.tp-panel[data-v-54edf760]{background:#fff}.tp-uinfo>uni-image[data-v-54edf760]{width:%?124?%;height:%?124?%;border:100%}.tp-uinfo>uni-view[data-v-54edf760]:nth-child(2){font-size:%?32?%;font-weight:700;color:#1d1d1d}.tp-uinfo>uni-view:nth-child(2)>uni-view[data-v-54edf760]{font-size:%?36?%}.tp-uinfo>uni-view[data-v-54edf760]:last-child{font-size:%?28?%;font-weight:500;color:#7c7c7c}.tp-panel-item[data-v-54edf760]{height:%?94?%}.tp-panel-item-hover[data-v-54edf760]{background:#fafafa}.tp-panel-item>uni-view[data-v-54edf760]:first-child{font-size:%?38?%;color:#343436}.tp-panel-item>uni-view[data-v-54edf760]:last-child{height:%?94?%;border-bottom:%?1?% solid #ededed}.tp-panel-item>uni-view:last-child>uni-view[data-v-54edf760]:first-child{font-size:%?30?%;font-weight:500;color:#666}.tp-panel-item>uni-view:last-child>uni-view[data-v-54edf760]:last-child{color:#999;font-size:%?30?%}",""]),t.exports=e},ab92:function(t,e,i){"use strict";var n=i("1037"),o=i.n(n);o.a},c618:function(t,e,i){"use strict";var n=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i("5530")),a=i("26cb"),s={data:function(){return{isLogin:!1,isGetPhone:!1,uhead:"/static/image/uhead.png",realname:"李萌",validdate:"2021-03-26",userWxInfo:{},toast:{msg:""},userInfo:{}}},computed:(0,o.default)({},(0,a.mapState)({loginStatus:function(t){return t.loginStatus},token:function(t){return t.token}})),onShow:function(){this.getUserInfo()},onLoad:function(){},methods:{toQuitLogin:function(){uni.showLoading({title:"加载中"}),this.API.apiRequest("/api/auth/logout",{},"post").then((function(t){200==t.code&&(uni.removeStorageSync("access_token"),uni.removeStorageSync("wx_code"),uni.removeStorageSync("ywId"),uni.reLaunch({url:"../login/login"})),uni.hideLoading()}))},getUserInfo:function(){var t=this;uni.showLoading({title:"加载中"}),this.API.apiRequest("/api/auth/me",{},"post").then((function(e){200==e.code&&(t.userWxInfo=e.data),uni.hideLoading()}))},doOpenAccounts:function(){this.$login.isLoginType().isLogin?uni.navigateTo({url:"../accounts/accounts"}):this.$refs.authPopup.open()},doOpenDevice:function(){this.$login.isLoginType().isLogin?uni.navigateTo({url:"../device/device"}):this.$refs.authPopup.open()},doOpenHistoryOperate:function(){this.$login.isLoginType().isLogin?uni.navigateTo({url:"../history-operate/history-operate"}):this.$refs.authPopup.open()},initAccount:function(){this.userInfo&&(this.realname=this.userInfo.name)},getPhoneNumber:function(t){this.wxData=t.detail,this.isGetPhone=!1,this.toLogin()},toLogin:function(){var t=this;t.$login.isLoginType().isAuth?uni.login({success:function(e){uni.setStorageSync("wx_code",e.code);var i="/auth/login",n={login_type:"wechatmini",business_id:"92a00bb5-f28e-4849-baa5-f1edd85649e6",wx_code:uni.getStorageSync("wx_code"),iv:t.wxData.iv,encryptedData:t.wxData.encryptedData,name:JSON.parse(uni.getStorageSync("userWxInfo")).nickName};uni.showLoading({title:"加载中"}),t.API.apiRequest(i,n,"post").then((function(e){200==e.code?(uni.showToast({title:"登录成功",icon:"none"}),uni.setStorageSync("access_token",e.data.access_token),t.userInfo=t.$login.isLoginType(),t.isLogin=!1,t.uhead=JSON.parse(uni.getStorageSync("userWxInfo")).avatarUrl,t.$forceUpdate(),t.getUserInfo()):(t.toast.msg=e.msg,t.$refs.toast.show()),uni.hideLoading()}))}}):t.$refs.authPopup.open()},toCloseLogin:function(){this.$refs.authPopup.close()},getAuth:function(){var t=this;uni.getUserProfile({desc:"登录",success:function(e){e.userInfo;uni.setStorageSync("isAuth","1"),t.$refs.authPopup.close()},fail:function(t){console.log("未授权err==",t)}})}}};e.default=s},d021:function(t,e,i){"use strict";i.r(e);var n=i("0bc8"),o=i("d512");for(var a in o)"default"!==a&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("ab92");var s,u=i("f0c5"),c=Object(u["a"])(o["default"],n["b"],n["c"],!1,null,"54edf760",null,!1,n["a"],s);e["default"]=c.exports},d512:function(t,e,i){"use strict";i.r(e);var n=i("c618"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a}}]);